FROM openjdk:14-jdk-alpine
MAINTAINER Kotov Svyatoslav
ADD /build/libs/shop_module-0.0.1-SNAPSHOT.jar shop-module.jar
ENV SERVER_PORT=8080
ENV GRPC_SERVER_PORT=9095
ENV PRODUCT-MODULE_HOST=http://localhost:
ENV PRODUCT-MODULE_PORT=8084
ENV ORDER-MODULE_HOST=http://localhost:
ENV ORDER-MODULE_PORT=8083
ENV PRODUCT-MODULE_GRPC_PORT=9094
ENV PRODUCT-MODULE_GRPC_HOST=localhost
ENV CLIENT-SHOP-MODULE_GRPC_PORT=9071
ENV CLIENT-SHOP-MODULE_GRPC_HOST=localhost

ENV SPRING_DATASOURCE_URL=jdbc:postgresql://192.168.99.100:5432/shop_module
ENV SPRING_DATASOURCE_USERNAME=postgres
ENV SPRING_DATASOURCE_PASSWORD=postgres

ENV JWT_SECRET=secretKey
ENV AUTH_COOKIE_AUTH=AUTH-TOKEN

ENV SPRING_RABBITMQ_HOST=192.168.99.100
ENV SPRING_RABBITMQ_PORT=5672
ENV SPRING_RABBITMQ_USERNAME=root
ENV SPRING_RABBITMQ_PASSWORD=root

ENV SPRING_KAFKA_BOOTSTRAP-SERVERS=90.156.225.74:29092
ENV SPRING_KAFKA_CONSUMER_AUTO-OFFSET-RESET=earliest
ENV SPRING_KAFKA_PRODUCER_ACKS=1
ENTRYPOINT java -jar /shop-module.jar